name: ğŸ” Predeploy Import Check

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  check-imports:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v3

      - name: ğŸ Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.12"

      - name: ğŸ“¦ Install dependencies
        run: pip install -r requirements.txt

      - name: ğŸš¨ Verify apps module import
        run: |
          export PYTHONPATH=src
          python -c "import importlib.util; \
          spec = importlib.util.find_spec('apps'); \
          print('âœ… apps module found' if spec else 'âŒ apps module missing'); \
          assert spec is not None, 'apps module not found, aborting CI/CD'"
